# Деплой Telegram бота на Railway.app

## Подготовка к деплою

### 1. Создание аккаунта на Railway
1. Перейдите на [railway.app](https://railway.app)
2. Зарегистрируйтесь через GitHub
3. Создайте новый проект

### 2. Подготовка репозитория
Убедитесь, что в вашем репозитории есть все необходимые файлы:
- `bot.py` - основной файл бота
- `config.py` - конфигурация
- `database.py` - работа с базой данных
- `requirements.txt` - зависимости Python
- `Procfile` - команда запуска
- `runtime.txt` - версия Python
- `railway.json` - конфигурация Railway

### 3. Настройка переменных окружения
В Railway Dashboard добавьте следующие переменные окружения:

```
TELEGRAM_TOKEN=ваш_токен_бота
SUPABASE_URL=ваш_url_supabase
SUPABASE_KEY=ваш_ключ_supabase
RAILWAY_ENVIRONMENT=true
```

### 4. Получение WEBHOOK_URL
После деплоя Railway автоматически предоставит URL вашего приложения. 
Добавьте его в переменные окружения:
```
WEBHOOK_URL=https://ваш-проект.railway.app
```

## Процесс деплоя

### 1. Подключение репозитория
1. В Railway Dashboard нажмите "New Project"
2. Выберите "Deploy from GitHub repo"
3. Выберите ваш репозиторий
4. Railway автоматически определит, что это Python проект

### 2. Настройка переменных окружения
1. Перейдите в раздел "Variables"
2. Добавьте все необходимые переменные (см. выше)
3. Сохраните изменения

### 3. Деплой
1. Railway автоматически запустит сборку
2. Дождитесь успешного деплоя
3. Скопируйте URL вашего приложения

### 4. Настройка webhook
1. Добавьте WEBHOOK_URL в переменные окружения
2. Перезапустите приложение
3. Бот автоматически настроит webhook

## Проверка работы

### 1. Health Check
Откройте URL вашего приложения в браузере. Должно появиться сообщение "Bot is running!"

### 2. Тестирование бота
1. Найдите вашего бота в Telegram
2. Отправьте команду `/start`
3. Проверьте, что бот отвечает

### 3. Проверка логов
В Railway Dashboard перейдите в раздел "Deployments" и посмотрите логи для диагностики проблем.

## Возможные проблемы

### 1. Бот не отвечает
- Проверьте, что TELEGRAM_TOKEN правильный
- Убедитесь, что WEBHOOK_URL настроен
- Проверьте логи в Railway

### 2. Ошибки с базой данных
- Проверьте SUPABASE_URL и SUPABASE_KEY
- Убедитесь, что таблицы созданы в Supabase

### 3. Ошибки сборки
- Проверьте, что все зависимости в requirements.txt
- Убедитесь, что версия Python в runtime.txt поддерживается

## Локальная разработка

Для локальной разработки используйте:
```bash
python bot.py
```

Бот автоматически запустится в режиме polling (без webhook).

## Мониторинг

Railway предоставляет:
- Автоматические логи
- Мониторинг производительности
- Автоматические перезапуски при сбоях
- Масштабирование при необходимости

## Обновления

Для обновления бота:
1. Внесите изменения в код
2. Запушьте в GitHub
3. Railway автоматически пересоберет и перезапустит приложение
